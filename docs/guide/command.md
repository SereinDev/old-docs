# 🔩 命令

Serein中最重要的组成部分

## 命令格式

```txt title="Serein命令"
<命令名称>|<执行内容>
<命令名称>:<参数]|<执行内容>
```

- 命令的名称部分不区分大小写
- `|`为竖线（分隔线）
  - 👆 U+007C，不是中文的`丨`(gǔn)
- `<>`表示必选内容
- `[]`表示为可选内容

## 调用cmd.exe执行一条命令

`cmd|<命令>`
运行结束后自动结束cmd进程

- 默认窗口编码：`936 ANSI/GBK`  
- 工作目录：`Serein.exe`所在目录  
- 显示窗口：否  
  
## 服务器命令

`s|<命令>`
`server|<命令>`
在服务器中执行命令  

:::note
若服务器未启动则不执行，下同
:::

`s:u|<命令>`  
`server:u|<命令>`  
`s:unicode|<命令>`  
`server:unicode|<命令>`  
在服务器中执行命令，不同的是将命令中的非ASCII的字符转换为Unicode字符输出，适用于`/tellraw`等使用`json`文本的命令

### 内置服务器指令

`s|start` 启动服务器  

:::note
仅当服务器未启动时能被触发
:::

## 发送私聊消息

`p|<消息>`  
`private|<消息>`  
发送一条消息给触发此命令的用户

:::note

- 以上两项只能由正则匹配到私聊或群聊消息时触发，发送对象为触发这项正则的用户
- 若触发对象不是机器人好友或账号不存在可能无法发送
:::

`p:<QQ>|<消息>`  
`private:<QQ>|<消息>`  
发送一条消息给指定用户

:::note
若触发对象不是机器人好友或账号不存在可能无法发送
:::

## 发送群聊消息

`g|<消息>`  
`group|<消息>`  
发送一条消息到触发此命令的群聊或默认群聊

:::note

- 当正则匹配的到群聊消息时，发送对象为触发这条消息的群聊  
- 当正则匹配的到私聊消息时，不发送消息  
- 其他情况下则发送至`设置-监听群列表`的第一项，若此项为空不发送  
- 若机器人未入群或被禁言则发送失败
:::

`g:<QQ>|<消息>`  
`group:<QQ>|<消息>`  
发送一条消息给指定群聊

:::note
若机器人未入群或被禁言则发送失败
:::

## 发送临时会话消息

`t|<消息>`  
`temp|<消息>`  
发送一条消息到触发此命令的用户

:::note
此命令只能由群消息触发
:::

## 绑定游戏ID

`b|<ID>`  
`bind|<ID>`  
将所填ID与触发这条消息的账号绑定

:::note

- 此命令只能被群聊消息触发
- 会返回消息提示，内容可在[事件](event)中自定义，下同
:::

## 解绑游戏ID

`ub|<QQID>`  
`unbind|<QQID>`  
解除QQ号为`QQID`的游戏ID绑定

## 获取服务器信息

- Java
  - `motdje|<IP>[:端口]`
  - 默认端口: 25565
- 基岩版
  - `motdpe|<IP>[:端口]`
  - 默认端口: 19132

通过发送数据包查询服务器的介绍信息

:::note

- 此命令只能被群聊消息触发  
- 以下几种情况将无法成功，并会返回错误消息
  - IP不正确  
  - 端口不正确  
  - 服务器不在运行中  
  - 域名无法解析  
  - 连接超时  
  - 数据包无法识别
- 消息模板和错误消息可通过[事件](event)自定义
:::

## 执行Javascript代码

`js|<代码>`  
`javascript|<代码>`

- 运行限时：1min
- js标准：ECMAScript 2022
- 详见[插件语法](../development)

## 在指定插件的JS引擎上执行Javascript代码

`js:<命名空间>|<代码>`  
`javascripst:<命名空间>|<代码>`

`命名空间`为插件文件名去掉扩展名后的文本

- 运行限时：1min
- js标准：ECMAScript 2022

## 调试输出

`debug|<消息>`  
输出调试消息到Debug窗口

:::tip
你需要[开启Debug模式](../tutorial/debugMode)
:::
